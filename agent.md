# Инструкции для AI-агента (Meta-Rules)

## 1. Исследование и контекст (RAG Protocol)
- **Context First:** Перед любым изменением изучи связанные файлы (интерфейсы, DI-модули, gradle-конфиги). 
- **No Guessing:** Если путь к файлу или сигнатура метода неизвестны — используй `grep` или `ls`. Запрещено угадывать структуру проекта.
- **Deep Scan:** При работе с Android-проектом всегда проверяй `libs.versions.toml` для контроля версий библиотек.

## 2. Целостность кода
- **No Placeholders:** Категорически запрещено удалять существующий код или заменять его комментариями вида `// ... rest of the code`. Ответ должен содержать полные, рабочие блоки кода.
- **Atomic Operations:** Разбивай сложные задачи на этапы. Не пытайся внедрить фичу в 10 файлов за один проход, если это нарушает стабильность сборки.
- **Self-Correction:** Если предложенное решение требует новых импортов — добавь их автоматически.

## 3. Взаимодействие с окружением
- **Terminal First:** Используй терминал для проверки своих предположений (проверка наличия файлов, поиск текста).
- **Build Validation:** После правок в логике предложи запустить `./gradlew assembleDebug` или соответствующий `check`.
- **Error Analysis:** Если компиляция не удалась, проанализируй логи ошибок в терминале и предложи исправление автоматически.

## 4. Коммуникация и рассуждения
- **Reasoning:** Всегда показывай свои рассуждения (`Thinking`). Объясняй *почему* выбран этот путь, если он затрагивает архитектуру.
- **Conciseness:** В чате будь краток. Минимум вежливости, максимум технической сути. 
- **Stop-Signal:** Если задача противоречит "Архитектурным табу" или контекст неясен — остановись и задай уточняющий вопрос.

## 5. Стиль решения задач
- **Refactor over Patch:** Если код написан плохо, предложи рефакторинг вместо того, чтобы «наслаивать» новую логику поверх грязной.
- **No Over-Engineering:** Не усложняй решение там, где достаточно простого типобезопасного подхода.

## 6. Редактирование кода
- **Keep code style:** Не меняй форматирование уже написанного кода
- **Multiline arguments:** Размещай аргументы функций и конструкторов при объясвлении и вызове по одному на строку
- **Arguments hints:** При вызове функции или конструктора добавляй наименования аргументов всегда, вроме случаев, когда аргумент один и абсолютно очевиден
- **Singleline functions:** Если функция состоит из одного выражения, а её результат не Unit, используй = вместо return